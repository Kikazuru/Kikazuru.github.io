import{_ as S,a as y,b as I}from"./SelectPermission.vue_vue_type_script_setup_true_lang-c41bbf43.js";import{u as $}from"./snackbar-93bdc399.js";import{d as j,u as G,e as N,r as m,o as B,h as P,g as t,f as a,a as p,j as u,S as D,m as R}from"./index-3573355a.js";import{g as W}from"./user-862e573d.js";import{w as h}from"./lazy-bd4f37e9.js";import{a as E,b as H,u as L}from"./group-2577dbdb.js";import{b as c,a as V,V as M}from"./VRow-3e89ef20.js";import{V as r,p as O}from"./VBtn-4acdbe86.js";import{V as T,a as q,b as _,c as z,d as g}from"./VStepper-a21c6d4f.js";import{c as U}from"./index-8e303578.js";import"./rules-3c02e6d9.js";import"./VTextField-e0e32189.js";import"./VTextarea-4f85dd16.js";import"./VForm-9b4298fa.js";import"./permission-4358f34e.js";import"./VChip-5b2c32d2.js";import"./tag-49144cbd.js";const A={class:"d-flex align-center"},F=p("div",{class:"text-h5 font-weight-bold"},"Update Groups",-1),J={class:"d-flex justify-start"},K={class:"d-flex justify-start mt-4"},Q={class:"d-flex justify-start mt-4"},Ve=j({__name:"UpdateGroup",setup(X){const x=G(),f=N().params.groupId;console.log(f);const s=m(1),v=m(!0),n=m({name:"",description:""}),i=m([]),d=m({});E(f).then(o=>{const e=o.data.result,l={name:e.name,description:e.description};n.value=l,H(f).then(C=>{i.value=C.data.result.members}),d.value=e.permissions});const b=$();function k(){const o={name:n.value.name,description:n.value.description,userIds:i.value.map(e=>e.id),permissions:d.value};L(f,o).then(e=>{if(!e.data.success)throw Error;b.showSnackbar("User group updated","success"),x.push({name:"group.see"})}).catch(()=>{b.showSnackbar("Update user group failed","error")})}async function w(o){return await W({limit:10,page:o})}return(o,e)=>(B(),P(M,{fluid:""},{default:t(()=>[a(V,null,{default:t(()=>[a(c,null,{default:t(()=>[p("div",A,[a(r,{icon:"",variant:"text",to:{name:"group.see"},exact:""},{default:t(()=>[a(O,null,{default:t(()=>[u(D(R(h)),1)]),_:1})]),_:1},8,["to"]),F])]),_:1})]),_:1}),a(V,null,{default:t(()=>[a(c,null,{default:t(()=>[a(T,{elevation:"0",modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=l=>s.value=l)},{default:t(()=>[a(q,null,{default:t(()=>[a(_,{title:"Information",value:1}),a(U),a(_,{title:"Select User",value:2}),a(U),a(_,{title:"Select Permission",value:3})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(V,{class:"align-start"},{default:t(()=>[a(c,null,{default:t(()=>[a(z,{modelValue:s.value,"onUpdate:modelValue":e[9]||(e[9]=l=>s.value=l)},{default:t(()=>[a(g,{value:1},{default:t(()=>[a(S,{class:"ma-2",modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=l=>n.value=l),valid:v.value,"onUpdate:valid":e[2]||(e[2]=l=>v.value=l)},null,8,["modelValue","valid"]),p("div",J,[a(r,{disabled:!v.value,variant:"tonal",onClick:e[3]||(e[3]=l=>s.value++)},{default:t(()=>[u(" Next ")]),_:1},8,["disabled"])])]),_:1}),a(g,{value:2},{default:t(()=>[a(y,{class:"ma-2","get-users":w,modelValue:i.value,"onUpdate:modelValue":e[4]||(e[4]=l=>i.value=l)},null,8,["modelValue"]),p("div",K,[a(r,{class:"me-2",variant:"tonal",onClick:e[5]||(e[5]=l=>s.value--)},{default:t(()=>[u(" Previous ")]),_:1}),a(r,{disabled:i.value.length<=0,variant:"tonal",onClick:e[6]||(e[6]=l=>s.value++)},{default:t(()=>[u(" Next ")]),_:1},8,["disabled"])])]),_:1}),a(g,{value:3},{default:t(()=>[a(I,{modelValue:d.value,"onUpdate:modelValue":e[7]||(e[7]=l=>d.value=l)},null,8,["modelValue"]),p("div",Q,[a(r,{class:"me-2",variant:"tonal",onClick:e[8]||(e[8]=l=>s.value--)},{default:t(()=>[u(" Previous ")]),_:1}),a(r,{disabled:Object.keys(d.value).length<=0,onClick:k,color:"primary"},{default:t(()=>[u(" Update ")]),_:1},8,["disabled"])])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}))}});export{Ve as default};
