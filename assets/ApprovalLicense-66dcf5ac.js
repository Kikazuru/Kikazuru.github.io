import{a as xe,d as _e,l as Ve}from"./topup-4a902c81.js";import{a as te,b as ae,c as N,f as le,V as H,m as he,g as ye,u as Ce,h as W,i as we,j as ke,k as be,d as Pe}from"./VTextField-bf30aba6.js";import{V as ne,a as oe,c as Fe,b as L}from"./VDataTableServer-b0c4b5cf.js";import{V as b}from"./VBtn-18a3f883.js";import{d as q,o as w,h as k,g as a,f as t,j as i,q as Ie,x as Re,y as Se,z as T,r as v,F as Ae,S as Te,P as Ne,w as P,Q as De,J as Ee,a8 as Be,D as M,M as $,ad as X,ae as Ue,af as Le,$ as z,aa as Me,K as $e,O as ze,i as He,a as se,U as Y}from"./index-d82b7293.js";import{I as qe,f as Ge}from"./index-babec776.js";import{b as Z,a as ee,V as Oe}from"./VRow-a32ba34a.js";import"./api-a2ad3bbc.js";import"./tag-19c9ac46.js";import"./VOverlay-d18fd668.js";const je=q({__name:"ApproveLicense",props:{licenseId:{}},emits:["approved"],setup(e,{emit:x}){const m=e,c=x;function s(o){xe(m.licenseId).then(()=>{c("approved"),o.value=!1})}return(o,d)=>(w(),k(oe,{width:"auto",activator:"parent"},{default:a(({isActive:p})=>[t(H,null,{default:a(()=>[t(te,null,{default:a(()=>[t(ae,null,{default:a(()=>[i(" Approve ")]),_:1})]),_:1}),t(N,null,{default:a(()=>[i(" Are you sure to approve this license? ")]),_:1}),t(le,null,{default:a(()=>[t(ne),t(b,{onClick:u=>s(p),class:"bg-primary"},{default:a(()=>[i(" APPROVE ")]),_:2},1032,["onClick"]),t(b,{onClick:u=>p.value=!1,color:"primary"},{default:a(()=>[i(" CANCEL ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1}))}});const Qe=Ie({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...he(),...ye()},"VTextarea"),Je=Re()({name:"VTextarea",directives:{Intersect:qe},inheritAttrs:!1,props:Qe(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,x){let{attrs:m,emit:c,slots:s}=x;const o=Se(e,"modelValue"),{isFocused:d,focus:p,blur:u}=Ce(e),l=T(()=>typeof e.counterValue=="function"?e.counterValue(o.value):(o.value||"").toString().length),h=T(()=>{if(m.maxlength)return m.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function ie(n,f){var r,g;!e.autofocus||!n||(g=(r=f[0].target)==null?void 0:r.focus)==null||g.call(r)}const G=v(),F=v(),O=Ae(""),I=v(),ue=T(()=>e.persistentPlaceholder||d.value||e.active);function D(){var n;I.value!==document.activeElement&&((n=I.value)==null||n.focus()),d.value||p()}function re(n){D(),c("click:control",n)}function ce(n){c("mousedown:control",n)}function de(n){n.stopPropagation(),D(),z(()=>{o.value="",Me(e["onClick:clear"],n)})}function fe(n){var r;const f=n.target;if(o.value=f.value,(r=e.modelModifiers)!=null&&r.trim){const g=[f.selectionStart,f.selectionEnd];z(()=>{f.selectionStart=g[0],f.selectionEnd=g[1]})}}const y=v(),R=v(+e.rows),E=T(()=>["plain","underlined"].includes(e.variant));Te(()=>{e.autoGrow||(R.value=+e.rows)});function C(){e.autoGrow&&z(()=>{if(!y.value||!F.value)return;const n=getComputedStyle(y.value),f=getComputedStyle(F.value.$el),r=parseFloat(n.getPropertyValue("--v-field-padding-top"))+parseFloat(n.getPropertyValue("--v-input-padding-top"))+parseFloat(n.getPropertyValue("--v-field-padding-bottom")),g=y.value.scrollHeight,S=parseFloat(n.lineHeight),B=Math.max(parseFloat(e.rows)*S+r,parseFloat(f.getPropertyValue("--v-input-control-height"))),U=parseFloat(e.maxRows)*S+r||1/0,V=ze(g??0,B,U);R.value=Math.floor((V-r)/S),O.value=$e(V)})}Ne(C),P(o,C),P(()=>e.rows,C),P(()=>e.maxRows,C),P(()=>e.density,C);let _;return P(y,n=>{n?(_=new ResizeObserver(C),_.observe(y.value)):_==null||_.disconnect()}),De(()=>{_==null||_.disconnect()}),Ee(()=>{const n=!!(s.counter||e.counter||e.counterValue),f=!!(n||s.details),[r,g]=Be(m),{modelValue:S,...B}=W.filterProps(e),U=we(e);return t(W,M({ref:G,modelValue:o.value,"onUpdate:modelValue":V=>o.value=V,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":E.value},e.class],style:e.style},r,B,{centerAffix:R.value===1&&!E.value,focused:d.value}),{...s,default:V=>{let{id:A,isDisabled:j,isDirty:Q,isReadonly:ve,isValid:me}=V;return t(ke,M({ref:F,style:{"--v-textarea-control-height":O.value},onClick:re,onMousedown:ce,"onClick:clear":de,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},U,{id:A.value,active:ue.value||Q.value,centerAffix:R.value===1&&!E.value,dirty:Q.value||e.dirty,disabled:j.value,focused:d.value,error:me.value===!1}),{...s,default:pe=>{let{props:{class:J,...K}}=pe;return t($,null,[e.prefix&&t("span",{class:"v-text-field__prefix"},[e.prefix]),X(t("textarea",M({ref:I,class:J,value:o.value,onInput:fe,autofocus:e.autofocus,readonly:ve.value,disabled:j.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:D,onBlur:u},K,g),null),[[Ue("intersect"),{handler:ie},null,{once:!0}]]),e.autoGrow&&X(t("textarea",{class:[J,"v-textarea__sizer"],id:`${K.id}-sizer`,"onUpdate:modelValue":ge=>o.value=ge,ref:y,readonly:!0,"aria-hidden":"true"},null),[[Le,o.value]]),e.suffix&&t("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:f?V=>{var A;return t($,null,[(A=s.details)==null?void 0:A.call(s,V),n&&t($,null,[t("span",null,null),t(be,{active:e.persistentCounter||d.value,value:l.value,max:h.value},s.counter)])])}:void 0})}),Ge({},G,F,I)}}),Ke=q({__name:"DeclineLicense",props:{licenseId:{}},emits:["declined"],setup(e,{emit:x}){const m=v(),c=v(""),s=e,o=x;async function d(p){const{valid:u}=await m.value.validate();u&&_e(s.licenseId,c.value).then(()=>{o("declined"),p.value=!1})}return(p,u)=>(w(),k(oe,{width:"auto",activator:"parent"},{default:a(({isActive:l})=>[t(H,null,{default:a(()=>[t(te,null,{default:a(()=>[t(ae,null,{default:a(()=>[i(" Decline ")]),_:1})]),_:1}),t(N,null,{default:a(()=>[i(" Are you sure to approve this license? ")]),_:1}),t(N,null,{default:a(()=>[t(Pe,{ref_key:"myForm",ref:m},{default:a(()=>[t(Je,{modelValue:c.value,"onUpdate:modelValue":u[0]||(u[0]=h=>c.value=h),rules:[h=>!!h],label:"Notes"},null,8,["modelValue","rules"])]),_:1},512)]),_:1}),t(le,null,{default:a(()=>[t(ne),t(b,{onClick:h=>d(l),class:"bg-primary"},{default:a(()=>[i(" DECLINE ")]),_:2},1032,["onClick"]),t(b,{onClick:h=>l.value=!1,color:"primary"},{default:a(()=>[i(" CANCEL ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1}))}}),We=se("div",{class:"text-h5 font-weight-bold"},"Approval License",-1),Xe={class:"d-flex justify-center"},ut=q({__name:"ApprovalLicense",setup(e){const x=v(10),m=v(100),c=v(!0),s=v([]),o=[{title:"REQUESTER",key:"requester"},{title:"ISSUER",key:"issuer"},{title:"STATUS",key:"state",sortable:!1,align:"center"},{title:"ACTION",key:"action",sortable:!1,align:"center"}];function d(){c.value=!0,Ve().then(async p=>{const u=p.data.result.topupRequests;u!=null&&(s.value=u.map(l=>({id:l.id,requester:l.requester,issuer:l.issuer,state:l.state})))}).finally(()=>{setTimeout(()=>{c.value=!1},2e3)})}return(p,u)=>(w(),k(Oe,{fluid:""},{default:a(()=>[t(ee,null,{default:a(()=>[t(Z,null,{default:a(()=>[We]),_:1})]),_:1}),t(ee,null,{default:a(()=>[t(Z,null,{default:a(()=>[t(H,null,{default:a(()=>[t(N,null,{default:a(()=>[t(Fe,{"return-object":"","show-select":"",color:"secondary","items-per-page":x.value,"onUpdate:itemsPerPage":u[0]||(u[0]=l=>x.value=l),headers:o,"items-length":m.value,items:s.value,loading:c.value,"item-value":"name","onUpdate:options":d},{"item.state":a(({item:l})=>[l.state=="approved"?(w(),k(L,{key:0,label:"",color:"success"},{default:a(()=>[i(" Approved ")]),_:1})):l.state=="pending"?(w(),k(L,{key:1,label:"",color:"warning"},{default:a(()=>[i(" Pending ")]),_:1})):l.state=="declined"?(w(),k(L,{key:2,label:"",color:"error"},{default:a(()=>[i(" Declined ")]),_:1})):He("",!0)]),"item.action":a(({item:l})=>[se("div",Xe,[t(b,{disabled:l.state!="pending",color:"success",class:"me-2"},{default:a(()=>[i(" Approve "),t(je,{onApproved:d,"license-id":l.id},null,8,["license-id"])]),_:2},1032,["disabled"]),t(b,{disabled:l.state!="pending",color:"error"},{default:a(()=>[i(" Decline "),t(Ke,{onDeclined:d,"license-id":l.id},null,8,["license-id"])]),_:2},1032,["disabled"])])]),"item.issuer":a(({item:l})=>[i(Y(l.issuer.name),1)]),"item.requester":a(({item:l})=>[i(Y(l.requester.name),1)]),_:2},1032,["items-per-page","items-length","items","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}});export{ut as default};
