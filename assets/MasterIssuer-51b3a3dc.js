import{b}from"./index-b4878894.js";import{p as R,t as L,v as j,x as O}from"./VOverlay-5a8b697f.js";import{k as A,V as w}from"./VBtn-1189b8c8.js";import{a as k,b as D,c as g,d as $,V as E}from"./VCard-99429928.js";import{V,b as B,d as z,c as M}from"./VDataTableServer-a735c4fc.js";import{d as S,x as F,o as T,h as N,w as t,a as e,b as U,i as o,P,O as I,g as m,c as X,F as q}from"./index-4ae7351a.js";import{b as y,a as C,V as G}from"./VRow-582c34c5.js";import{V as H,a as x}from"./VTextField-744f38d5.js";import"./tag-21e3285f.js";import"./VAvatar-701b24ac.js";async function J(){return await b.get("/admin/issuers")}async function K(f){return await b.post("/admin/issuers",f)}async function Q(f){return await b.delete(`/admin/issuers/${f}`)}const W={class:"d-flex justify-end mb-2"},Y=S({__name:"DeleteIssuer",props:{show:{type:Boolean},issuer:{}},emits:["update:show","deleted"],setup(f,{emit:_}){const c=f,s=_,i=F({get(){return c.show},set(u){s("update:show",u)}}),v=R();function n(){Q(c.issuer.id).then(u=>{if(u.data.success)s("deleted"),i.value=!1,v.showSnackbar("User data has been deleted!","success");else throw Error}).catch(()=>{v.showSnackbar("Delete user failed!","error")})}return(u,l)=>(T(),N(B,{width:"auto",modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=a=>i.value=a)},{default:t(()=>[e(E,{class:"text-center pa-4",rounded:"lg"},{default:t(()=>[U("div",W,[e(A,{size:"small"},{default:t(()=>[o(P(I(L)),1)]),_:1})]),e(k,null,{default:t(()=>[e(D,null,{default:t(()=>[o(" Are you sure want to delete the issuer? ")]),_:1})]),_:1}),e(g,null,{default:t(()=>[o(" This action cannot be undo ")]),_:1}),e($,null,{default:t(()=>[e(V),e(w,{onClick:n,variant:"flat",color:"primary"},{default:t(()=>[o(" DELETE ")]),_:1}),e(w,{onClick:l[0]||(l[0]=a=>i.value=!1),color:"primary"},{default:t(()=>[o(" CANCEL ")]),_:1}),e(V)]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),Z=S({__name:"AddIssuer",props:{show:{type:Boolean}},emits:["update:show","created"],setup(f,{emit:_}){const c=m(),s=m({identifier:"",name:""}),i=f,v=_,n=F({get(){return i.show},set(l){v("update:show",l)}});async function u(){const{valid:l}=await c.value.validate();if(l){const a=z(s.value);K(a).then(r=>{r.data.success&&(v("created"),n.value=!1,c.value.reset())})}}return(l,a)=>(T(),N(B,{modelValue:n.value,"onUpdate:modelValue":a[3]||(a[3]=r=>n.value=r)},{default:t(()=>[e(C,null,{default:t(()=>[e(V),e(y,{cols:"12",xxl:"4",xl:"4",lg:"4",md:"4",sm:"7"},{default:t(()=>[e(H,{ref_key:"myForm",ref:c},{default:t(()=>[e(E,{"max-height":"90vh",class:"overflow-auto"},{default:t(()=>[e(k,null,{default:t(()=>[e(D,null,{default:t(()=>[o(" Add Issuer ")]),_:1})]),_:1}),e(g,null,{default:t(()=>[e(x,{modelValue:s.value.name,"onUpdate:modelValue":a[0]||(a[0]=r=>s.value.name=r),label:"Issuer Name"},null,8,["modelValue"]),e(x,{modelValue:s.value.identifier,"onUpdate:modelValue":a[1]||(a[1]=r=>s.value.identifier=r),label:"Identifier"},null,8,["modelValue"])]),_:1}),e($,null,{default:t(()=>[e(V),e(w,{onClick:u,class:"bg-primary"},{default:t(()=>[o("ADD")]),_:1}),e(w,{onClick:a[2]||(a[2]=r=>n.value=!1),variant:"text",color:"primary"},{default:t(()=>[o("CANCEL")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1}),e(V)]),_:1})]),_:1},8,["modelValue"]))}}),ee=U("div",{class:"text-h5 font-weight-bold"},"Card Issuer",-1),te={class:"d-flex justify-center flex-wrap"},ce=S({__name:"MasterIssuer",setup(f){const _=m(10),c=m(100),s=m(!0),i=m([]),v=[{title:"ISSUER ID",key:"id"},{title:"CARD ISSUER",key:"name"},{title:"IDENTIFIER",key:"identifier"},{title:"STATUS",key:"state"},{title:"UPDATE",key:"update",sortable:!1,align:"center"},{title:"DELETE",key:"delete",sortable:!1,align:"center"}];function n(){s.value=!0,J().then(h=>{const d=h.data.result;i.value=d.issuers}).finally(()=>{setTimeout(()=>{s.value=!1},2e3)})}const u=m(!1),l=m(!1),a=m();function r(h){a.value=h,l.value=!0}return(h,d)=>(T(),X(q,null,[e(G,{fluid:""},{default:t(()=>[e(C,null,{default:t(()=>[e(y,null,{default:t(()=>[ee]),_:1})]),_:1}),e(C,null,{default:t(()=>[e(y,null,{default:t(()=>[e(E,null,{default:t(()=>[e(k,null,{default:t(()=>[e(D,null,{default:t(()=>[o(" List Issuer ")]),_:1})]),_:1}),e(g,{class:"mt-2"},{default:t(()=>[e(C,null,{default:t(()=>[e(y,null,{default:t(()=>[e(w,{variant:"outlined","prepend-icon":I(j)},{default:t(()=>[o(" EXPORT ")]),_:1},8,["prepend-icon"])]),_:1}),e(V),e(y,{cols:"12",xxl:"4",xl:"4",lg:"4",md:"4"},{default:t(()=>[U("div",te,[e(x,{placeholder:"Search card issuer","hide-details":"",variant:"outlined",density:"compact"}),e(w,{onClick:d[0]||(d[0]=p=>u.value=!0),variant:"tonal",class:"bg-primary ms-2"},{default:t(()=>[o(" ADD ISSUER ")]),_:1})])]),_:1})]),_:1})]),_:1}),e(g,null,{default:t(()=>[e(M,{"return-object":"","show-select":"",color:"secondary","items-per-page":_.value,"onUpdate:itemsPerPage":d[1]||(d[1]=p=>_.value=p),headers:v,"items-length":c.value,items:i.value,loading:s.value,"item-value":"name","onUpdate:options":n},{"item.delete":t(({item:p})=>[e(A,{onClick:ae=>r(p)},{default:t(()=>[o(P(I(O)),1)]),_:2},1032,["onClick"])]),_:2},1032,["items-per-page","items-length","items","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(Z,{show:u.value,"onUpdate:show":d[2]||(d[2]=p=>u.value=p),onCreated:n},null,8,["show"]),e(Y,{onDeleted:n,show:l.value,"onUpdate:show":d[3]||(d[3]=p=>l.value=p),issuer:a.value},null,8,["show","issuer"])],64))}});export{ce as default};
