import{p as N,q as L,r as j,s as B}from"./mdi-e82a7810.js";import{d as I}from"./user-841668b4.js";import{u as R}from"./snackbar-17fa77a2.js";import{p as C,V as i}from"./VBtn-18a3f883.js";import{a as w,b as A,c as x,f as O,V as S,e as F}from"./VTextField-bf30aba6.js";import{V as E,a as M,c as q,b as y}from"./VDataTableServer-b0c4b5cf.js";import{d as P,o as d,h as u,g as e,f as t,a as $,j as a,U as h,m as p,r as _,l as z,ab as k,i as U}from"./index-d82b7293.js";import{a as G,b as D}from"./VRow-a32ba34a.js";const X={class:"d-flex justify-end mb-2"},ae=P({__name:"DeleteUser",props:{user:{}},emits:["update:modelValue","update:show","userDeleted"],setup(v,{emit:b}){const f=v,g=b,o=R();function m(n){I(f.user.id).then(V=>{if(!V.data.success)throw Error;o.showSnackbar("User data has been deleted!","success"),g("userDeleted"),n.value=!1}).catch(()=>{o.showSnackbar("Delete user failed!","error")})}return(n,V)=>(d(),u(M,{width:"auto",activator:"parent"},{default:e(({isActive:l})=>[t(S,{class:"text-center pa-4",rounded:"lg"},{default:e(()=>[$("div",X,[t(C,{onClick:r=>l.value=!1,size:"small"},{default:e(()=>[a(h(p(N)),1)]),_:2},1032,["onClick"])]),t(w,null,{default:e(()=>[t(A,null,{default:e(()=>[a(" Are you sure want to delete the user? ")]),_:1})]),_:1}),t(x,null,{default:e(()=>[a(" This action cannot be undo ")]),_:1}),t(O,null,{default:e(()=>[t(E),t(i,{onClick:r=>m(l),variant:"flat",color:"primary"},{default:e(()=>[a(" DELETE ")]),_:2},1032,["onClick"]),t(i,{onClick:r=>l.value=!1,color:"primary"},{default:e(()=>[a(" CANCEL ")]),_:2},1032,["onClick"]),t(E)]),_:2},1024)]),_:2},1024)]),_:1}))}}),H={class:"d-flex justify-center flex-wrap"},se=P({__name:"ViewUser",props:{loadApi:{type:Function}},setup(v){const b=v,f=_(10),g=_(100),o=_(!0),m=_([]),n=[{title:"EMAIL",key:"email"},{title:"GROUP NAME",key:"group-name"},{title:"STATUS",key:"state",sortable:!1,align:"center"}],l=z().permissions;l["user.update"]&&n.push({title:"UPDATE",key:"update",sortable:!1,align:"center"}),l["user.delete"]&&n.push({title:"DELETE",key:"delete",sortable:!1,align:"center"});function r(){o.value=!0,b.loadApi().then(c=>{m.value=c.data.result.users}).finally(()=>{setTimeout(()=>{o.value=!1},2e3)})}return(c,T)=>(d(),u(S,null,{default:e(()=>[t(w,null,{default:e(()=>[t(A,null,{default:e(()=>[a(" List Of Users ")]),_:1})]),_:1}),t(x,{class:"mt-2"},{default:e(()=>[t(G,null,{default:e(()=>[t(D,null,{default:e(()=>[t(i,{variant:"outlined","prepend-icon":p(L)},{default:e(()=>[a(" EXPORT ")]),_:1},8,["prepend-icon"])]),_:1}),t(E),t(D,{cols:"12",xxl:"4",xl:"4",lg:"4",md:"4"},{default:e(()=>[$("div",H,[t(F,{placeholder:"Search user or group name","hide-details":"",variant:"outlined",density:"compact"}),p(l)["user.create"]?(d(),u(i,{key:0,variant:"tonal",class:"bg-primary ms-2"},{default:e(()=>[k(c.$slots,"add",{loadUsers:r}),a(" ADD USER ")]),_:3})):U("",!0)])]),_:3})]),_:3})]),_:3}),t(x,null,{default:e(()=>[t(q,{"return-object":"","show-select":"",color:"secondary","items-per-page":f.value,"onUpdate:itemsPerPage":T[0]||(T[0]=s=>f.value=s),headers:n,"items-length":g.value,items:m.value,loading:o.value,"item-value":"name","onUpdate:options":r},{"item.group-name":e(()=>[a(h("-"))]),"item.state":e(({item:s})=>[s.state=="active"?(d(),u(y,{key:0,color:"success",label:""},{default:e(()=>[a("Active")]),_:1})):s.state=="pending"?(d(),u(y,{key:1,color:"warning",label:""},{default:e(()=>[a("Pending")]),_:1})):s.state=="deleted"?(d(),u(y,{key:2,color:"error",label:""},{default:e(()=>[a("Deleted")]),_:1})):U("",!0)]),"item.update":e(({item:s})=>[t(i,{disabled:s.state=="deleted",color:"secondary",variant:"text",icon:""},{default:e(()=>[t(C,null,{default:e(()=>[a(h(p(j)),1)]),_:1}),k(c.$slots,"update",{user:s,loadUsers:r})]),_:2},1032,["disabled"])]),"item.delete":e(({item:s})=>[t(i,{disabled:s.state=="deleted",color:"secondary",variant:"text",icon:""},{default:e(()=>[t(C,null,{default:e(()=>[a(h(p(B)),1)]),_:1}),k(c.$slots,"delete",{user:s,loadUsers:r})]),_:2},1032,["disabled"])]),_:2},1032,["items-per-page","items-length","items","loading"])]),_:3})]),_:3}))}});export{se as _,ae as a};
