import{_ as I,a as y,b as $}from"./SelectPermission.vue_vue_type_script_setup_true_lang-cc6345ac.js";import{u as j}from"./snackbar-82b4b4e3.js";import{d as G,u as N,e as B,r as u,o as P,h as D,g as t,f as a,a as p,j as r,S as R,m as W}from"./index-033028ba.js";import{g as h}from"./user-f49a07c4.js";import{w as E}from"./lazy-62b0a598.js";import{a as H,b as L,u as M}from"./group-91eec8d0.js";import{b as c,a as V,V as O}from"./VRow-cccfd752.js";import{V as n,p as T}from"./VBtn-4c1884a2.js";import{V as q,a as z,b as _,c as A,d as b}from"./VStepper-5968c5ff.js";import{c as x}from"./index-fc6a3455.js";import"./rules-3c02e6d9.js";import"./VTextField-d6d2aeeb.js";import"./VTextarea-0f79b0ed.js";import"./VForm-3ddb7e8c.js";import"./permission-4358f34e.js";import"./VChip-87521e80.js";import"./tag-13d67880.js";import"./api-f2d6da92.js";const F={class:"d-flex align-center"},J=p("div",{class:"text-h5 font-weight-bold"},"Update Groups",-1),K={class:"d-flex justify-start"},Q={class:"d-flex justify-start mt-4"},X={class:"d-flex justify-start mt-4"},be=G({__name:"UpdateGroup",setup(Y){const k=N(),f=B().params.groupId,l=u(1),v=u(!0),i=u({name:"",description:""}),g=u(void 0),d=u([]),m=u({});H(f).then(o=>{const e=o.data.result,s={name:e.name,description:e.description};i.value=s,g.value=e.issuer,L(f).then(S=>{d.value=S.data.result.members}),m.value=e.permissions});const U=j();function w(){const o={name:i.value.name,description:i.value.description,userIds:d.value.map(e=>e.id),permissions:m.value};M(f,o).then(e=>{if(!e.data.success)throw Error;U.showSnackbar("User group updated","success"),k.push({name:"group.see"})}).catch(()=>{U.showSnackbar("Update user group failed","error")})}async function C(o){var e;return await h({limit:10,page:o,issuerId:(e=g.value)==null?void 0:e.id})}return(o,e)=>(P(),D(O,{fluid:""},{default:t(()=>[a(V,null,{default:t(()=>[a(c,null,{default:t(()=>[p("div",F,[a(n,{icon:"",variant:"text",to:{name:"group.see"},exact:""},{default:t(()=>[a(T,null,{default:t(()=>[r(R(W(E)),1)]),_:1})]),_:1},8,["to"]),J])]),_:1})]),_:1}),a(V,null,{default:t(()=>[a(c,null,{default:t(()=>[a(q,{elevation:"0",modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=s=>l.value=s)},{default:t(()=>[a(z,null,{default:t(()=>[a(_,{title:"Information",value:1}),a(x),a(_,{title:"Select User",value:2}),a(x),a(_,{title:"Select Permission",value:3})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(V,{class:"align-start"},{default:t(()=>[a(c,null,{default:t(()=>[a(A,{modelValue:l.value,"onUpdate:modelValue":e[9]||(e[9]=s=>l.value=s)},{default:t(()=>[a(b,{value:1},{default:t(()=>[a(I,{class:"ma-2",modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=s=>i.value=s),valid:v.value,"onUpdate:valid":e[2]||(e[2]=s=>v.value=s)},null,8,["modelValue","valid"]),p("div",K,[a(n,{disabled:!v.value,variant:"tonal",onClick:e[3]||(e[3]=s=>l.value++)},{default:t(()=>[r(" Next ")]),_:1},8,["disabled"])])]),_:1}),a(b,{value:2},{default:t(()=>[a(y,{class:"ma-2","get-users":C,modelValue:d.value,"onUpdate:modelValue":e[4]||(e[4]=s=>d.value=s)},null,8,["modelValue"]),p("div",Q,[a(n,{class:"me-2",variant:"tonal",onClick:e[5]||(e[5]=s=>l.value--)},{default:t(()=>[r(" Previous ")]),_:1}),a(n,{disabled:d.value.length<=0,variant:"tonal",onClick:e[6]||(e[6]=s=>l.value++)},{default:t(()=>[r(" Next ")]),_:1},8,["disabled"])])]),_:1}),a(b,{value:3},{default:t(()=>[a($,{modelValue:m.value,"onUpdate:modelValue":e[7]||(e[7]=s=>m.value=s)},null,8,["modelValue"]),p("div",X,[a(n,{class:"me-2",variant:"tonal",onClick:e[8]||(e[8]=s=>l.value--)},{default:t(()=>[r(" Previous ")]),_:1}),a(n,{disabled:Object.keys(m.value).length<=0,onClick:w,color:"primary"},{default:t(()=>[r(" Update ")]),_:1},8,["disabled"])])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}))}});export{be as default};
