import{m as re,g as ce,u as de,h as O,i as fe,j as me,k as pe,a as Q,V as J,b as ve,c as G,f as ye}from"./VTextField-bf30aba6.js";import{f as Ve}from"./index-babec776.js";import{q as ge,a7 as ke,x as Ce,C as he,y as Se,z as p,r as v,w as _e,J as be,a8 as Re,f as t,D as w,M as B,a9 as H,$ as Ie,aa as Pe,d as we,l as Fe,o as V,h as g,g as l,a as Ae,m as K,j as i,ab as qe,i as D,ac as ze,U as _}from"./index-d82b7293.js";import{b as F,c as Be,a as De,V as N}from"./VDataTableServer-b0c4b5cf.js";import{o as Ne}from"./mdi-e82a7810.js";import{V as W,p as Te}from"./VBtn-18a3f883.js";import{a as xe,b as Ue}from"./VRow-a32ba34a.js";const $e=ge({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,showSize:{type:[Boolean,Number],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(e)},...re({prependIcon:"$file"}),modelValue:{type:Array,default:()=>[],validator:e=>ke(e).every(k=>k!=null&&typeof k=="object")},...ce({clearable:!0})},"VFileInput"),Ke=Ce()({name:"VFileInput",inheritAttrs:!1,props:$e(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,k){let{attrs:A,emit:b,slots:o}=k;const{t:R}=he(),s=Se(e,"modelValue"),{isFocused:f,focus:q,blur:I}=de(e),y=p(()=>typeof e.showSize!="boolean"?e.showSize:void 0),c=p(()=>(s.value??[]).reduce((a,u)=>{let{size:C=0}=u;return a+C},0)),n=p(()=>H(c.value,y.value)),r=p(()=>(s.value??[]).map(a=>{const{name:u="",size:C=0}=a;return e.showSize?`${u} (${H(C,y.value)})`:u})),T=p(()=>{var u;const a=((u=s.value)==null?void 0:u.length)??0;return e.showSize?R(e.counterSizeString,a,n.value):R(e.counterString,a)}),x=v(),U=v(),m=v(),X=p(()=>f.value||e.active),$=p(()=>["plain","underlined"].includes(e.variant));function z(){var a;m.value!==document.activeElement&&((a=m.value)==null||a.focus()),f.value||q()}function Y(a){E(a)}function Z(a){b("mousedown:control",a)}function E(a){var u;(u=m.value)==null||u.click(),b("click:control",a)}function ee(a){a.stopPropagation(),z(),Ie(()=>{s.value=[],Pe(e["onClick:clear"],a)})}return _e(s,a=>{(!Array.isArray(a)||!a.length)&&m.value&&(m.value.value="")}),be(()=>{const a=!!(o.counter||e.counter),u=!!(a||o.details),[C,te]=Re(A),{modelValue:Le,...ae}=O.filterProps(e),le=fe(e);return t(O,w({ref:x,modelValue:s.value,"onUpdate:modelValue":h=>s.value=h,class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-input--plain-underlined":$.value},e.class],style:e.style,"onClick:prepend":Y},C,ae,{centerAffix:!$.value,focused:f.value}),{...o,default:h=>{let{id:P,isDisabled:S,isDirty:L,isReadonly:j,isValid:ne}=h;return t(me,w({ref:U,"prepend-icon":e.prependIcon,onMousedown:Z,onClick:E,"onClick:clear":ee,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},le,{id:P.value,active:X.value||L.value,dirty:L.value,disabled:S.value,focused:f.value,error:ne.value===!1}),{...o,default:se=>{var M;let{props:{class:oe,...ue}}=se;return t(B,null,[t("input",w({ref:m,type:"file",readonly:j.value,disabled:S.value,multiple:e.multiple,name:e.name,onClick:d=>{d.stopPropagation(),j.value&&d.preventDefault(),z()},onChange:d=>{if(!d.target)return;const ie=d.target;s.value=[...ie.files??[]]},onFocus:z,onBlur:I},ue,te),null),t("div",{class:oe},[!!((M=s.value)!=null&&M.length)&&(o.selection?o.selection({fileNames:r.value,totalBytes:c.value,totalBytesReadable:n.value}):e.chips?r.value.map(d=>t(F,{key:d,size:"small",color:e.color},{default:()=>[d]})):r.value.join(", "))])])}})},details:u?h=>{var P,S;return t(B,null,[(P=o.details)==null?void 0:P.call(o,h),a&&t(B,null,[t("span",null,null),t(pe,{active:!!((S=s.value)!=null&&S.length),value:T.value},o.counter)])])}:void 0})}),Ve({},x,U,m)}}),Ee={class:"d-flex justify-end"},We=we({__name:"ViewRequestedLicense",props:{listRequestedLicense:{type:Function}},setup(e){const A=Fe().permissions,b=e,o=v(10),R=v(100),s=v(!0),f=v([]),q=[{title:"REQUESTER",key:"requester"},{title:"ISSUER",key:"issuer"},{title:"QUOTA",key:"quota"},{title:"ADMIN",key:"actor"},{title:"STATUS",key:"state",sortable:!1,align:"center"},{title:"NOTES",key:"declinedReason",sortable:!1}];function I(){s.value=!0,b.listRequestedLicense().then(async y=>{const c=y.data.result.topupRequests;c!=null&&(f.value=c)}).finally(()=>{setTimeout(()=>{s.value=!1},2e3)})}return(y,c)=>(V(),g(J,null,{default:l(()=>[t(Q,null,{default:l(()=>[Ae("div",Ee,[K(A)["quota.request.create"]?(V(),g(W,{key:0,color:"primary"},{default:l(()=>[i(" Request License "),qe(y.$slots,"create",{loadRequestedLicense:I})]),_:3})):D("",!0)])]),_:3}),t(G,null,{default:l(()=>[t(Be,{"return-object":"","show-select":"",color:"secondary","items-per-page":o.value,"onUpdate:itemsPerPage":c[0]||(c[0]=n=>o.value=n),headers:q,"items-length":R.value,items:f.value,loading:s.value,"item-value":"name","onUpdate:options":I},{"item.state":l(({item:n})=>[n.state=="approved"?(V(),g(F,{key:0,label:"",color:"success"},{default:l(()=>[i(" Accepted ")]),_:1})):n.state=="declined"?(V(),g(F,{key:1,label:"",color:"error"},{default:l(()=>[i(" Declined ")]),_:1})):n.state=="pending"?(V(),g(F,{key:2,label:"",color:"warning"},{default:l(()=>[i(" Pending ")]),_:1})):D("",!0)]),"item.declinedReason":l(({item:n})=>[t(De,null,{activator:l(({props:r})=>[n.state=="declined"?(V(),g(Te,ze(w({key:0},r)),{default:l(()=>[i(_(K(Ne)),1)]),_:2},1040)):D("",!0)]),default:l(({isActive:r})=>[t(xe,null,{default:l(()=>[t(N),t(Ue,{cols:"4"},{default:l(()=>[t(J,null,{default:l(()=>[t(Q,null,{default:l(()=>[t(ve,null,{default:l(()=>[i("Decline Notes")]),_:1})]),_:1}),t(G,{class:"text-justify"},{default:l(()=>[i(_(n.declinedReason),1)]),_:2},1024),t(ye,null,{default:l(()=>[t(N),t(W,{onClick:T=>r.value=!1},{default:l(()=>[i("CLOSE")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),t(N)]),_:2},1024)]),_:2},1024)]),"item.issuer":l(({item:n})=>[i(_(n.issuer.name),1)]),"item.actor":l(({item:n})=>{var r;return[i(_(((r=n.actor)==null?void 0:r.name)||"-"),1)]}),"item.requester":l(({item:n})=>[i(_(n.requester.name),1)]),_:2},1032,["items-per-page","items-length","items","loading"])]),_:1})]),_:3}))}});export{Ke as V,We as _};
