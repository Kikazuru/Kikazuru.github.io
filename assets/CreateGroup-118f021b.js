import{r as k}from"./rules-3c02e6d9.js";import{V as P}from"./VTextField-f7af6f26.js";import{V as j}from"./VTextarea-30e8b5da.js";import{V as B}from"./VForm-acfbacb3.js";import{d as y,z as D,r as d,R as G,o as I,h as $,g as l,f as e,m as w,u as F,a as V,j as p,S as R}from"./index-69d1502a.js";import{_ as T,a as E}from"./SelectPermission.vue_vue_type_script_setup_true_lang-04b5d9ec.js";import{c as W}from"./group-e736e658.js";import{u as q}from"./snackbar-867af268.js";import{g as z}from"./user-2f0087e0.js";import{w as H}from"./lazy-eda09f13.js";import{b,a as g,V as L}from"./VRow-1f387fa0.js";import{V as v,p as O}from"./VBtn-421a5577.js";import{V as A,a as J,b as x,c as K,d as U}from"./VStepper-8c1ebb00.js";import{c as S}from"./index-6405a72a.js";import"./permission-2c18b797.js";import"./VChip-b541bb3f.js";import"./tag-446592ee.js";const M=y({__name:"GroupInformation",props:{valid:{type:[Boolean,null]},modelValue:{}},emits:["update:valid","update:modelValue"],setup(C,{emit:_}){const s=C,m=_,o=D({get(){return s.valid},set(f){m("update:valid",f)}}),u=d(""),n=d("");return G(()=>{m("update:modelValue",{name:u.value,description:n.value})}),(f,r)=>(I(),$(B,{"validate-on":"input",modelValue:o.value,"onUpdate:modelValue":r[2]||(r[2]=i=>o.value=i)},{default:l(()=>[e(P,{class:"mb-3",rules:w(k),modelValue:u.value,"onUpdate:modelValue":r[0]||(r[0]=i=>u.value=i),label:"Name"},null,8,["rules","modelValue"]),e(j,{class:"mb-3",rules:w(k),modelValue:n.value,"onUpdate:modelValue":r[1]||(r[1]=i=>n.value=i),label:"Description"},null,8,["rules","modelValue"])]),_:1},8,["modelValue"]))}}),Q={class:"d-flex align-center"},X=V("div",{class:"text-h5 font-weight-bold"},"Create Groups",-1),Y={class:"d-flex justify-end"},Z={class:"d-flex justify-space-between"},h={class:"d-flex justify-space-between"},be=y({__name:"CreateGroup",setup(C){const _=F(),s=d(1),m=d(!1),o=d({name:"",description:"",issuer:null}),u=d([]),n=d({}),f=q();function r(){var a;const c={name:o.value.name,description:o.value.description,issuerId:(a=o.value.issuer)==null?void 0:a.id,userIds:u.value.map(t=>t.id),permissions:n.value};W(c).then(t=>{if(!t.data.success)throw Error;f.showSnackbar("User group created","success"),_.push({name:"group.see"})}).catch(()=>{f.showSnackbar("Create user group failed","error")})}const i=d(10);async function N(c){return await z({limit:i.value,page:c})}return(c,a)=>(I(),$(L,{fluid:""},{default:l(()=>[e(g,null,{default:l(()=>[e(b,null,{default:l(()=>[V("div",Q,[e(v,{icon:"",variant:"text",to:{name:"group.see"},exact:""},{default:l(()=>[e(O,null,{default:l(()=>[p(R(w(H)),1)]),_:1})]),_:1},8,["to"]),X])]),_:1})]),_:1}),e(g,null,{default:l(()=>[e(b,null,{default:l(()=>[e(A,{elevation:"0",modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=t=>s.value=t)},{default:l(()=>[e(J,null,{default:l(()=>[e(x,{title:"Information",value:1}),e(S),e(x,{title:"Select User",value:2}),e(S),e(x,{title:"Select Permission",value:3})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(g,{class:"align-start"},{default:l(()=>[e(b,null,{default:l(()=>[e(K,{modelValue:s.value,"onUpdate:modelValue":a[9]||(a[9]=t=>s.value=t)},{default:l(()=>[e(U,{value:1},{default:l(()=>[e(M,{class:"ma-2",modelValue:o.value,"onUpdate:modelValue":a[1]||(a[1]=t=>o.value=t),valid:m.value,"onUpdate:valid":a[2]||(a[2]=t=>m.value=t)},null,8,["modelValue","valid"]),V("div",Y,[e(v,{disabled:!m.value,variant:"tonal",onClick:a[3]||(a[3]=t=>s.value++)},{default:l(()=>[p(" Next ")]),_:1},8,["disabled"])])]),_:1}),e(U,{value:2},{default:l(()=>[e(T,{class:"ma-2","get-users":N,modelValue:u.value,"onUpdate:modelValue":a[4]||(a[4]=t=>u.value=t)},null,8,["modelValue"]),V("div",Z,[e(v,{variant:"tonal",onClick:a[5]||(a[5]=t=>s.value--)},{default:l(()=>[p(" Previous ")]),_:1}),e(v,{disabled:u.value.length<=0,variant:"tonal",onClick:a[6]||(a[6]=t=>s.value++)},{default:l(()=>[p(" Next ")]),_:1},8,["disabled"])])]),_:1}),e(U,{value:3},{default:l(()=>[e(E,{modelValue:n.value,"onUpdate:modelValue":a[7]||(a[7]=t=>n.value=t)},null,8,["modelValue"]),V("div",h,[e(v,{variant:"tonal",onClick:a[8]||(a[8]=t=>s.value--)},{default:l(()=>[p(" Previous ")]),_:1}),e(v,{disabled:Object.keys(n.value).length<=0,onClick:r,variant:"tonal"},{default:l(()=>[p(" Submit ")]),_:1},8,["disabled"])])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}))}});export{be as default};
