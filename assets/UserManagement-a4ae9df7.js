import{_ as I,a as L}from"./ViewUser.vue_vue_type_script_setup_true_lang-d4a58059.js";import{d as $}from"./common-5dc68c7b.js";import{a as P,u as M,g as j}from"./user-841668b4.js";import{e as A,n as N}from"./rules-28b1d808.js";import{V as i,a as D}from"./VDataTableServer-b0c4b5cf.js";import{b as V,a as U,V as R}from"./VRow-a32ba34a.js";import{d as E,V as F,a as T,b as B,c as C,e as b,f as S}from"./VTextField-bf30aba6.js";import{V as x}from"./VBtn-18a3f883.js";import{d as y,r as h,o as g,h as w,g as a,f as e,j as c,m as _,a as p}from"./index-d82b7293.js";import{u as q}from"./snackbar-17fa77a2.js";import"./mdi-e82a7810.js";import"./index-babec776.js";import"./tag-19c9ac46.js";import"./VOverlay-d18fd668.js";const z=p("div",{class:"mb-3"},"Login Credentials",-1),G=p("div",{class:"mb-3"},"Personal Info",-1),H=y({__name:"AddUser",emits:["userAdded"],setup(k,{emit:v}){const r=h(),s=h({name:"",email:""}),t=v;async function u(f){const{valid:o}=await r.value.validate();if(o){const d=$(s.value);P(d).then(l=>{l.data.success&&(t("userAdded"),f.value=!1,r.value.reset())})}}return(f,o)=>(g(),w(D,{activator:"parent"},{default:a(({isActive:d})=>[e(U,null,{default:a(()=>[e(i),e(V,{cols:"12",xxl:"4",xl:"4",lg:"4",md:"4",sm:"7"},{default:a(()=>[e(E,{ref_key:"myForm",ref:r},{default:a(()=>[e(F,{"max-height":"90vh",class:"overflow-auto"},{default:a(()=>[e(T,null,{default:a(()=>[e(B,null,{default:a(()=>[c(" Add User ")]),_:1})]),_:1}),e(C,null,{default:a(()=>[z,e(b,{rules:_(A),modelValue:s.value.email,"onUpdate:modelValue":o[0]||(o[0]=l=>s.value.email=l),type:"email",label:"Email"},null,8,["rules","modelValue"])]),_:1}),e(C,{class:"pt-0"},{default:a(()=>[G,e(b,{class:"mb-3",rules:_(N),modelValue:s.value.name,"onUpdate:modelValue":o[1]||(o[1]=l=>s.value.name=l),label:"Name"},null,8,["rules","modelValue"])]),_:1}),e(S,null,{default:a(()=>[e(i),e(x,{onClick:l=>u(d),class:"bg-primary"},{default:a(()=>[c(" ADD ")]),_:2},1032,["onClick"]),e(x,{onClick:l=>d.value=!1,variant:"text",color:"primary"},{default:a(()=>[c(" CANCEL ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1536)]),_:2},1024),e(i)]),_:2},1024)]),_:1}))}}),J=p("div",{class:"mb-3"},"Credentials",-1),K=p("div",{class:"mb-3"},"Personal Info",-1),O=y({__name:"UpdateUser",props:{user:{}},emits:["update:user","update:show","userUpdated"],setup(k,{emit:v}){const r=h(),s=v,t=k,u=h({email:t.user.email,name:t.user.name,role:t.user.role}),f=q();async function o(d){const{valid:l}=await r.value.validate();if(l){const m=$(u.value);M(t.user.id,m).then(n=>{if(!n.data.success)throw Error;s("userUpdated",m),r.value.reset(),f.showSnackbar("User data has been updated!","success")}).catch(()=>{f.showSnackbar("Update user failed!","error")}).finally(()=>{d.value=!1})}}return(d,l)=>(g(),w(D,{activator:"parent"},{default:a(({isActive:m})=>[e(U,null,{default:a(()=>[e(i),e(V,{cols:"12",xxl:"4",xl:"4",lg:"4",md:"4",sm:"7"},{default:a(()=>[e(E,{ref_key:"myForm",ref:r},{default:a(()=>[e(F,{"max-height":"90vh",class:"overflow-auto"},{default:a(()=>[e(T,null,{default:a(()=>[e(B,null,{default:a(()=>[c(" Update User ")]),_:1})]),_:1}),e(C,null,{default:a(()=>[J,e(b,{class:"mb-3",rules:_(A),modelValue:u.value.email,"onUpdate:modelValue":l[0]||(l[0]=n=>u.value.email=n),type:"email",label:"Email"},null,8,["rules","modelValue"])]),_:1}),e(C,{class:"pt-0"},{default:a(()=>[K,e(b,{class:"mb-3",rules:_(N),modelValue:u.value.name,"onUpdate:modelValue":l[1]||(l[1]=n=>u.value.name=n),label:"Name"},null,8,["rules","modelValue"])]),_:1}),e(S,null,{default:a(()=>[e(i),e(x,{onClick:n=>o(m),class:"bg-primary"},{default:a(()=>[c(" UPDATE ")]),_:2},1032,["onClick"]),e(x,{onClick:n=>m.value=!1,variant:"text",color:"primary"},{default:a(()=>[c(" CANCEL ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1536)]),_:2},1024),e(i)]),_:2},1024)]),_:1}))}}),Q=p("div",{class:"text-h5 font-weight-bold"},"User Management",-1),ie=y({__name:"UserManagement",setup(k){return(v,r)=>(g(),w(R,{fluid:""},{default:a(()=>[e(U,null,{default:a(()=>[e(V,null,{default:a(()=>[Q]),_:1})]),_:1}),e(U,null,{default:a(()=>[e(V,null,{default:a(()=>[e(I,{"load-api":_(j)},{add:a(({loadUsers:s})=>[e(H,{onUserAdded:s},null,8,["onUserAdded"])]),update:a(({loadUsers:s,user:t})=>[e(O,{onUserUpdated:s,user:t},null,8,["onUserUpdated","user"])]),delete:a(({loadUsers:s,user:t})=>[e(L,{onUserDeleted:s,user:t},null,8,["onUserDeleted","user"])]),_:1},8,["load-api"])]),_:1})]),_:1})]),_:1}))}});export{ie as default};
