import{r as B,l as F}from"./topup-bcbed27b.js";import{V as S,_ as T}from"./ViewRequestedLicense.vue_vue_type_script_setup_true_lang-1efa8e7d.js";import{l as U}from"./issuer-07d3c33d.js";import{u as N}from"./snackbar-867af268.js";import{a as d,b as $}from"./VDataTableServer-921b4e3b.js";import{b as f,a as p,V as D}from"./VRow-1f387fa0.js";import{V as E,a as M,b as P,d as j,j as z}from"./index-6405a72a.js";import{V as A}from"./VForm-acfbacb3.js";import{V as Q}from"./VTextField-f7af6f26.js";import{V as O}from"./VAutocomplete-e056e3cf.js";import{V as x}from"./VBtn-421a5577.js";import{d as h,r as s,o as k,h as y,g as t,f as e,j as c,m as G,a as H}from"./index-69d1502a.js";import"./api-77cd4ed9.js";import"./VChip-b541bb3f.js";import"./tag-446592ee.js";import"./lazy-eda09f13.js";import"./MessageDialog.vue_vue_type_script_setup_true_lang-db1065c2.js";import"./FilterHeaderCheckbox.vue_vue_type_script_setup_true_lang-e8950ebf.js";import"./VList-0497e142.js";import"./filter-bfc06a5f.js";const J=h({__name:"CreateLicense",emits:["created"],setup(q,{emit:V}){const m=s(),u=s([]),_=s(!0),v=s(1),I=s(10),L=s(100);async function C(){U({page:v.value,limit:I.value,states:["active"]}).then(o=>{o.data.result.issuers&&(u.value.push(...o.data.result.issuers),L.value=o.data.result.recordsCount,v.value++,C())}).finally(()=>{_.value=!1})}const n=s(),i=s(),b=s([]),R=V,g=N();async function w(o){if(n.value!=null&&i.value!=null){const a=parseInt(n.value.toString()),r=i.value;B(a,r).then(()=>{R("created"),o.value=!1,g.showSnackbar("Request license success","success")}).catch(()=>{g.showSnackbar("Request license failed","error")})}}return(o,a)=>(k(),y($,{activator:"parent"},{default:t(({isActive:r})=>[e(p,null,{default:t(()=>[e(d),e(f,{cols:"12",xxl:"4",xl:"4",lg:"4",md:"4",sm:"7"},{default:t(()=>[e(E,{onVnodeBeforeMount:C},{default:t(()=>[e(M,null,{default:t(()=>[e(P,null,{default:t(()=>[c(" Request License ")]),_:1})]),_:1}),e(j,null,{default:t(()=>[e(A,{ref_key:"myForm",ref:m},{default:t(()=>[e(Q,{class:"mb-3",label:"Quantity",min:"1",type:"number",modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=l=>n.value=l)},null,8,["modelValue"]),e(O,{loading:_.value,items:u.value,"item-title":"name","item-value":"id",class:"mb-3",modelValue:i.value,"onUpdate:modelValue":a[1]||(a[1]=l=>i.value=l),label:"Issuer"},null,8,["loading","items","modelValue"]),e(S,{modelValue:b.value,"onUpdate:modelValue":a[2]||(a[2]=l=>b.value=l),label:"Purchase Order Document","show-size":"","persistent-hint":"",hint:"Max file size 2 MB"},null,8,["modelValue"])]),_:1},512),e(z,null,{default:t(()=>[e(d),e(x,{onClick:l=>(r.value=!1,m.value.reset()),variant:"text",color:"primary"},{default:t(()=>[c("CANCEL")]),_:2},1032,["onClick"]),e(x,{onClick:l=>w(r),class:"bg-primary"},{default:t(()=>[c("REQUEST")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1536)]),_:2},1024),e(d)]),_:2},1024)]),_:1}))}}),K=H("div",{class:"text-h5 font-weight-bold"},"TopUp License",-1),_e=h({__name:"RequestedLicense",setup(q){return(V,m)=>(k(),y(D,{fluid:""},{default:t(()=>[e(p,null,{default:t(()=>[e(f,null,{default:t(()=>[K]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(f,null,{default:t(()=>[e(T,{"list-requested-license":G(F)},{create:t(({loadRequestedLicense:u})=>[e(J,{onCreated:u},null,8,["onCreated"])]),_:1},8,["list-requested-license"])]),_:1})]),_:1})]),_:1}))}});export{_e as default};
