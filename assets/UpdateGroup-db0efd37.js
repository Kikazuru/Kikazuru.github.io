import{_ as C,a as S,b as I}from"./SelectPermission.vue_vue_type_script_setup_true_lang-34948baf.js";import{u as $}from"./snackbar-867af268.js";import{d as y,u as j,e as N,r as m,o as B,h as G,g as t,f as a,a as p,j as u,S as P,m as D}from"./index-69d1502a.js";import{g as R}from"./user-2f0087e0.js";import{w as W}from"./lazy-eda09f13.js";import{a as E,u as H}from"./group-e736e658.js";import{b as c,a as V,V as L}from"./VRow-1f387fa0.js";import{V as n,p as O}from"./VBtn-421a5577.js";import{V as T,a as h,b as _,c as q,d as g}from"./VStepper-8c1ebb00.js";import{c as U}from"./index-6405a72a.js";import"./rules-3c02e6d9.js";import"./VTextField-f7af6f26.js";import"./VTextarea-30e8b5da.js";import"./VForm-acfbacb3.js";import"./permission-2c18b797.js";import"./VChip-b541bb3f.js";import"./tag-446592ee.js";const z={class:"d-flex align-center"},A=p("div",{class:"text-h5 font-weight-bold"},"Update Groups",-1),F={class:"d-flex justify-end"},J={class:"d-flex justify-space-between"},K={class:"d-flex justify-space-between"},ve=y({__name:"UpdateGroup",setup(M){const x=j(),f=N().params.groupId;console.log(f);const o=m(1),v=m(!0),r=m({name:"",description:""}),d=m([]),i=m({});E(f).then(s=>{const e=s.data.result,l={name:e.name,description:e.description};r.value=l,d.value=e.members,i.value=e.permissions});const b=$();function k(){const s={name:r.value.name,description:r.value.description,userIds:d.value.map(e=>e.id),permissions:i.value};H(f,s).then(e=>{if(!e.data.success)throw Error;b.showSnackbar("User group updated","success"),x.push({name:"group.see"})}).catch(()=>{b.showSnackbar("Update user group failed","error")})}async function w(s){return await R({limit:10,page:s})}return(s,e)=>(B(),G(L,{fluid:""},{default:t(()=>[a(V,null,{default:t(()=>[a(c,null,{default:t(()=>[p("div",z,[a(n,{icon:"",variant:"text",to:{name:"group.see"},exact:""},{default:t(()=>[a(O,null,{default:t(()=>[u(P(D(W)),1)]),_:1})]),_:1},8,["to"]),A])]),_:1})]),_:1}),a(V,null,{default:t(()=>[a(c,null,{default:t(()=>[a(T,{elevation:"0",modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=l=>o.value=l)},{default:t(()=>[a(h,null,{default:t(()=>[a(_,{title:"Information",value:1}),a(U),a(_,{title:"Select User",value:2}),a(U),a(_,{title:"Select Permission",value:3})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(V,{class:"align-start"},{default:t(()=>[a(c,null,{default:t(()=>[a(q,{modelValue:o.value,"onUpdate:modelValue":e[9]||(e[9]=l=>o.value=l)},{default:t(()=>[a(g,{value:1},{default:t(()=>[a(C,{class:"ma-2",modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=l=>r.value=l),valid:v.value,"onUpdate:valid":e[2]||(e[2]=l=>v.value=l)},null,8,["modelValue","valid"]),p("div",F,[a(n,{disabled:!v.value,variant:"tonal",onClick:e[3]||(e[3]=l=>o.value++)},{default:t(()=>[u(" Next ")]),_:1},8,["disabled"])])]),_:1}),a(g,{value:2},{default:t(()=>[a(S,{class:"ma-2","get-users":w,modelValue:d.value,"onUpdate:modelValue":e[4]||(e[4]=l=>d.value=l)},null,8,["modelValue"]),p("div",J,[a(n,{variant:"tonal",onClick:e[5]||(e[5]=l=>o.value--)},{default:t(()=>[u(" Previous ")]),_:1}),a(n,{disabled:d.value.length<=0,variant:"tonal",onClick:e[6]||(e[6]=l=>o.value++)},{default:t(()=>[u(" Next ")]),_:1},8,["disabled"])])]),_:1}),a(g,{value:3},{default:t(()=>[a(I,{modelValue:i.value,"onUpdate:modelValue":e[7]||(e[7]=l=>i.value=l)},null,8,["modelValue"]),p("div",K,[a(n,{variant:"tonal",onClick:e[8]||(e[8]=l=>o.value--)},{default:t(()=>[u(" Previous ")]),_:1}),a(n,{disabled:Object.keys(i.value).length<=0,onClick:k,variant:"tonal"},{default:t(()=>[u(" Update ")]),_:1},8,["disabled"])])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}))}});export{ve as default};
