import{l as D}from"./issuer-07d3c33d.js";import{r as k}from"./rules-3c02e6d9.js";import{V as G}from"./VTextField-f7af6f26.js";import{V as E}from"./VTextarea-30e8b5da.js";import{b as F}from"./VList-0497e142.js";import{I as L,c as $}from"./index-6405a72a.js";import{V as R}from"./VAutocomplete-e056e3cf.js";import{V as T}from"./VForm-acfbacb3.js";import{d as j,z as W,r as s,R as N,o as x,h as y,g as t,f as l,m as g,$ as q,a as V,i as B,u as z,j as p,S as A,c as H}from"./index-69d1502a.js";import{_ as O,a as J}from"./SelectPermission.vue_vue_type_script_setup_true_lang-04b5d9ec.js";import{c as K}from"./group-465346e7.js";import{u as M}from"./snackbar-867af268.js";import{g as Q}from"./user-4dbb0d25.js";import{w as X}from"./lazy-eda09f13.js";import{b as C,a as U,V as Y}from"./VRow-1f387fa0.js";import{V as f,p as Z}from"./VBtn-421a5577.js";import{V as h,a as ee,b as w,c as ae,d as S}from"./VStepper-8c1ebb00.js";import"./api-77cd4ed9.js";import"./tag-446592ee.js";import"./filter-bfc06a5f.js";import"./VChip-b541bb3f.js";import"./permission-2c18b797.js";const le=j({__name:"GroupInformation",props:{valid:{type:[Boolean,null]},modelValue:{}},emits:["update:valid","update:modelValue"],setup(P,{emit:I}){const o=P,m=I,u=W({get(){return o.valid},set(e){m("update:valid",e)}}),r=s(""),i=s(""),v=s();N(()=>{m("update:modelValue",{name:r.value,description:i.value,issuer:v.value})});const b=s([]),c=s(1),_=s(5),d=s(100);return N(()=>{D({limit:_.value,page:c.value}).then(e=>{const a=e.data.result;b.value.push(...a.issuers||[]),d.value=a.recordsCount}).catch(()=>{})}),(e,a)=>(x(),y(T,{"validate-on":"input",modelValue:u.value,"onUpdate:modelValue":a[3]||(a[3]=n=>u.value=n)},{default:t(()=>[l(G,{class:"mb-3",rules:g(k),modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=n=>r.value=n),label:"Name"},null,8,["rules","modelValue"]),l(E,{class:"mb-3",rules:g(k),modelValue:i.value,"onUpdate:modelValue":a[1]||(a[1]=n=>i.value=n),label:"Description"},null,8,["rules","modelValue"]),l(R,{modelValue:v.value,"onUpdate:modelValue":a[2]||(a[2]=n=>v.value=n),rules:g(k),items:b.value,"item-title":"name","return-object":"",label:"Issuer",class:"mb-3"},{"append-item":t(()=>[d.value>_.value*c.value?(x(),y(F,{key:0},{default:t(()=>[q(V("div",null,null,512),[[L,c.value++]])]),_:1})):B("",!0)]),_:1},8,["modelValue","rules","items"])]),_:1},8,["modelValue"]))}}),te={class:"d-flex align-center"},se=V("div",{class:"text-h5 font-weight-bold"},"Create Groups",-1),ue={class:"d-flex justify-end"},oe={key:0,class:"ma-2"},re={class:"d-flex justify-space-between"},ie={class:"d-flex justify-space-between"},je=j({__name:"CreateGroup",setup(P){const I=z(),o=s(1),m=s(!1),u=s({name:"",description:"",issuer:null}),r=s([]),i=s({}),v=M();function b(){var e;const d={name:u.value.name,description:u.value.description,issuerId:(e=u.value.issuer)==null?void 0:e.id,userIds:r.value.map(a=>a.id),permissions:i.value};K(d).then(a=>{if(!a.data.success)throw Error;v.showSnackbar("User group created","success"),I.push({name:"group.see"})}).catch(()=>{v.showSnackbar("Create user group failed","error")})}const c=s(10);async function _(d){var e;return await Q({limit:c.value,page:d,issuerId:(e=u.value.issuer)==null?void 0:e.id})}return(d,e)=>(x(),y(Y,{fluid:""},{default:t(()=>[l(U,null,{default:t(()=>[l(C,null,{default:t(()=>[V("div",te,[l(f,{icon:"",variant:"text",to:{name:"group.see"},exact:""},{default:t(()=>[l(Z,null,{default:t(()=>[p(A(g(X)),1)]),_:1})]),_:1},8,["to"]),se])]),_:1})]),_:1}),l(U,null,{default:t(()=>[l(C,null,{default:t(()=>[l(h,{elevation:"0",modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value=a)},{default:t(()=>[l(ee,null,{default:t(()=>[l(w,{title:"Information",value:1}),l($),l(w,{title:"Select User",value:2}),l($),l(w,{title:"Select Permission",value:3})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(U,{class:"align-start"},{default:t(()=>[l(C,null,{default:t(()=>[l(ae,{modelValue:o.value,"onUpdate:modelValue":e[9]||(e[9]=a=>o.value=a)},{default:t(()=>[l(S,{value:1},{default:t(()=>[l(le,{class:"ma-2",modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=a=>u.value=a),valid:m.value,"onUpdate:valid":e[2]||(e[2]=a=>m.value=a)},null,8,["modelValue","valid"]),V("div",ue,[l(f,{disabled:!m.value,variant:"tonal",onClick:e[3]||(e[3]=a=>o.value++)},{default:t(()=>[p(" Next ")]),_:1},8,["disabled"])])]),_:1}),l(S,{value:2},{default:t(()=>[u.value.issuer?(x(),H("div",oe,[l(O,{"get-users":_,modelValue:r.value,"onUpdate:modelValue":e[4]||(e[4]=a=>r.value=a),issuer:u.value.issuer},null,8,["modelValue","issuer"])])):B("",!0),V("div",re,[l(f,{variant:"tonal",onClick:e[5]||(e[5]=a=>o.value--)},{default:t(()=>[p(" Previous ")]),_:1}),l(f,{disabled:r.value.length<=0,variant:"tonal",onClick:e[6]||(e[6]=a=>o.value++)},{default:t(()=>[p(" Next ")]),_:1},8,["disabled"])])]),_:1}),l(S,{value:3},{default:t(()=>[l(J,{modelValue:i.value,"onUpdate:modelValue":e[7]||(e[7]=a=>i.value=a)},null,8,["modelValue"]),V("div",ie,[l(f,{variant:"tonal",onClick:e[8]||(e[8]=a=>o.value--)},{default:t(()=>[p(" Previous ")]),_:1}),l(f,{disabled:Object.keys(i.value).length<=0,onClick:b,variant:"tonal"},{default:t(()=>[p(" Submit ")]),_:1},8,["disabled"])])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}))}});export{je as default};
