import{d as L,u as j,c as B,l as q}from"./issuer-745d4891.js";import{u as F}from"./snackbar-17fa77a2.js";import{p as z,q as M,s as O,r as X}from"./mdi-e82a7810.js";import{p as U,V as i}from"./VBtn-18a3f883.js";import{a as g,b as w,c as b,f as A,V as E,d as P,e as I}from"./VTextField-bf30aba6.js";import{V as c,a as $,c as G,b as S}from"./VDataTableServer-b0c4b5cf.js";import{d as D,o as v,h as V,g as a,f as e,a as N,j as l,U as T,m as x,r as m,i as H}from"./index-d82b7293.js";import{d as R}from"./common-5dc68c7b.js";import{b as h,a as k,V as J}from"./VRow-a32ba34a.js";import"./api-a2ad3bbc.js";import"./tag-19c9ac46.js";import"./index-babec776.js";import"./VOverlay-d18fd668.js";const K={class:"d-flex justify-end mb-2"},Q=D({__name:"DeleteIssuer",props:{issuer:{}},emits:["update:show","deleted"],setup(y,{emit:f}){const d=y,r=f,n=F();function p(o){L(d.issuer.id).then(u=>{if(u.data.success)r("deleted"),o.value=!1,n.showSnackbar("User data has been deleted!","success");else throw Error}).catch(()=>{n.showSnackbar("Delete user failed!","error")})}return(o,u)=>(v(),V($,{activator:"parent",width:"auto"},{default:a(({isActive:s})=>[e(E,{class:"text-center pa-4",rounded:"lg"},{default:a(()=>[N("div",K,[e(U,{size:"small"},{default:a(()=>[l(T(x(z)),1)]),_:1})]),e(g,null,{default:a(()=>[e(w,null,{default:a(()=>[l(" Are you sure want to delete the issuer? ")]),_:1})]),_:1}),e(b,null,{default:a(()=>[l(" This action cannot be undo ")]),_:1}),e(A,null,{default:a(()=>[e(c),e(i,{onClick:t=>p(s),variant:"flat",color:"primary"},{default:a(()=>[l(" DELETE ")]),_:2},1032,["onClick"]),e(i,{onClick:t=>s.value=!1,color:"primary"},{default:a(()=>[l(" CANCEL ")]),_:2},1032,["onClick"]),e(c)]),_:2},1024)]),_:2},1024)]),_:1}))}}),W=D({__name:"UpdateIssuer",props:{issuer:{}},emits:["update:show","updated"],setup(y,{emit:f}){const d=y,r=m(),n=m({identifier:d.issuer.identifier,name:d.issuer.name}),p=f,o=F();async function u(s){const{valid:t}=await r.value.validate();if(t){const C=R(n.value);j(d.issuer.id,C).then(_=>{if(_.data.success)p("updated"),o.showSnackbar("Issuer data has been updated!","success");else throw Error}).catch(()=>{o.showSnackbar("Update user failed!","error")}).finally(()=>{s.value=!1,r.value.reset()})}}return(s,t)=>(v(),V($,{activator:"parent"},{default:a(({isActive:C})=>[e(k,null,{default:a(()=>[e(c),e(h,{cols:"12",xxl:"4",xl:"4",lg:"4",md:"4",sm:"7"},{default:a(()=>[e(P,{ref_key:"myForm",ref:r},{default:a(()=>[e(E,{"max-height":"90vh",class:"overflow-auto"},{default:a(()=>[e(g,null,{default:a(()=>[e(w,null,{default:a(()=>[l(" Add Issuer ")]),_:1})]),_:1}),e(b,null,{default:a(()=>[e(I,{modelValue:n.value.name,"onUpdate:modelValue":t[0]||(t[0]=_=>n.value.name=_),label:"Issuer Name"},null,8,["modelValue"]),e(I,{modelValue:n.value.identifier,"onUpdate:modelValue":t[1]||(t[1]=_=>n.value.identifier=_),label:"Identifier"},null,8,["modelValue"])]),_:1}),e(A,null,{default:a(()=>[e(c),e(i,{onClick:_=>u(C),class:"bg-primary"},{default:a(()=>[l("UPDATE")]),_:2},1032,["onClick"]),e(i,{onClick:_=>C.value=!1,variant:"text",color:"primary"},{default:a(()=>[l("CANCEL")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1536)]),_:2},1024),e(c)]),_:2},1024)]),_:1}))}}),Y=D({__name:"AddIssuer",emits:["update:show","created"],setup(y,{emit:f}){const d=m(),r=m({identifier:"",name:""}),n=f;async function p(o){const{valid:u}=await d.value.validate();if(u){const s=R(r.value);B(s).then(t=>{t.data.success&&(n("created"),o.value=!1,d.value.reset())})}}return(o,u)=>(v(),V($,{activator:"parent"},{default:a(({isActive:s})=>[e(k,null,{default:a(()=>[e(c),e(h,{cols:"12",xxl:"4",xl:"4",lg:"4",md:"4",sm:"7"},{default:a(()=>[e(P,{ref_key:"myForm",ref:d},{default:a(()=>[e(E,{"max-height":"90vh",class:"overflow-auto"},{default:a(()=>[e(g,null,{default:a(()=>[e(w,null,{default:a(()=>[l(" Add Issuer ")]),_:1})]),_:1}),e(b,null,{default:a(()=>[e(I,{modelValue:r.value.name,"onUpdate:modelValue":u[0]||(u[0]=t=>r.value.name=t),label:"Issuer Name"},null,8,["modelValue"]),e(I,{modelValue:r.value.identifier,"onUpdate:modelValue":u[1]||(u[1]=t=>r.value.identifier=t),label:"Identifier"},null,8,["modelValue"])]),_:1}),e(A,null,{default:a(()=>[e(c),e(i,{onClick:t=>p(s),class:"bg-primary"},{default:a(()=>[l("ADD")]),_:2},1032,["onClick"]),e(i,{onClick:t=>s.value=!1,variant:"text",color:"primary"},{default:a(()=>[l("CANCEL")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1536)]),_:2},1024),e(c)]),_:2},1024)]),_:1}))}}),Z=N("div",{class:"text-h5 font-weight-bold"},"Card Issuer",-1),ee={class:"d-flex justify-center flex-wrap"},_e=D({__name:"MasterIssuer",setup(y){const f=m(10),d=m(100),r=m(!0),n=m([]),p=[{title:"ISSUER ID",key:"id"},{title:"CARD ISSUER",key:"name"},{title:"IDENTIFIER",key:"identifier"},{title:"STATUS",key:"state"},{title:"UPDATE",key:"update",sortable:!1,align:"center"},{title:"DELETE",key:"delete",sortable:!1,align:"center"}];function o(){r.value=!0,q().then(u=>{const s=u.data.result;n.value=s.issuers}).finally(()=>{setTimeout(()=>{r.value=!1},2e3)})}return(u,s)=>(v(),V(J,{fluid:""},{default:a(()=>[e(k,null,{default:a(()=>[e(h,null,{default:a(()=>[Z]),_:1})]),_:1}),e(k,null,{default:a(()=>[e(h,null,{default:a(()=>[e(E,null,{default:a(()=>[e(g,null,{default:a(()=>[e(w,null,{default:a(()=>[l(" List Issuer ")]),_:1})]),_:1}),e(b,{class:"mt-2"},{default:a(()=>[e(k,null,{default:a(()=>[e(h,null,{default:a(()=>[e(i,{variant:"outlined","prepend-icon":x(M)},{default:a(()=>[l(" EXPORT ")]),_:1},8,["prepend-icon"])]),_:1}),e(c),e(h,{cols:"12",xxl:"4",xl:"4",lg:"4",md:"4"},{default:a(()=>[N("div",ee,[e(I,{placeholder:"Search card issuer","hide-details":"",variant:"outlined",density:"compact"}),e(i,{variant:"tonal",class:"bg-primary ms-2"},{default:a(()=>[l(" ADD ISSUER "),e(Y,{onCreated:o})]),_:1})])]),_:1})]),_:1})]),_:1}),e(b,null,{default:a(()=>[e(G,{"return-object":"","show-select":"",color:"secondary","items-per-page":f.value,"onUpdate:itemsPerPage":s[0]||(s[0]=t=>f.value=t),headers:p,"items-length":d.value,items:n.value,loading:r.value,"item-value":"name","onUpdate:options":o},{"item.delete":a(({item:t})=>[e(i,{color:"secondary",variant:"text",icon:""},{default:a(()=>[e(U,null,{default:a(()=>[l(T(x(O)),1)]),_:1}),e(Q,{onDeleted:o,issuer:t},null,8,["issuer"])]),_:2},1024)]),"item.update":a(({item:t})=>[e(i,{color:"secondary",variant:"text",icon:""},{default:a(()=>[e(U,null,{default:a(()=>[l(T(x(X)),1)]),_:1}),e(W,{onUpdated:o,issuer:t},null,8,["issuer"])]),_:2},1024)]),"item.state":a(({item:t})=>[t.state=="active"?(v(),V(S,{key:0,label:"",color:"success"},{default:a(()=>[l(" Active ")]),_:1})):t.state=="deleted"?(v(),V(S,{key:1,label:"",color:"error"},{default:a(()=>[l(" deleted ")]),_:1})):t.state=="pending"?(v(),V(S,{key:2,label:"",color:"warning"},{default:a(()=>[l(" pending ")]),_:1})):H("",!0)]),_:2},1032,["items-per-page","items-length","items","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}});export{_e as default};
