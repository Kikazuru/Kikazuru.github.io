import{q as D,r as I}from"./lazy-eda09f13.js";import{_ as w}from"./MessageDialog.vue_vue_type_script_setup_true_lang-db1065c2.js";import{d as S,r as n,o as _,h as x,g as e,f as t,j as l,a as A,m as f,c as M,S as i,a7 as R,a8 as P}from"./index-69d1502a.js";import{b as p,a as v,d as c,V as L,i as y}from"./index-6405a72a.js";import{V,p as N}from"./VBtn-421a5577.js";import{V as Y}from"./VDataTableServer-921b4e3b.js";import{V as b}from"./VChip-b541bb3f.js";import{b as m,a as C,V as B}from"./VRow-1f387fa0.js";import"./tag-446592ee.js";import"./VList-0497e142.js";import"./filter-bfc06a5f.js";import"./VTextField-f7af6f26.js";const $={class:"d-flex"},F={key:1},H=S({__name:"LockedLicenseTable",props:{getLockedLogs:{type:Function}},setup(d){const a=n(1),u=n(10),r=n(100),g=n(!0),T=[{title:"IDENTIFIER",key:"lockIdentifier"},{title:"STATUS",key:"success"},{title:"CREATED AT",key:"createdAt"}],E=d,k=n([]);function U(){g.value=!0,E.getLockedLogs({limit:u.value,page:a.value}).then(h=>{const o=h.data.result;k.value=o.logs||[],r.value=o.recordsCount}).finally(()=>{setTimeout(()=>{g.value=!1},2e3)})}return(h,o)=>(_(),x(L,null,{default:e(()=>[t(v,null,{default:e(()=>[t(p,null,{default:e(()=>[l("Locked License Log ")]),_:1})]),_:1}),t(c,{class:"mt-2"},{default:e(()=>[A("div",$,[t(V,{variant:"outlined","prepend-icon":f(D)},{default:e(()=>[l(" EXPORT ")]),_:1},8,["prepend-icon"])])]),_:1}),t(c,null,{default:e(()=>[t(Y,{"return-object":"",color:"secondary",page:a.value,"onUpdate:page":o[0]||(o[0]=s=>a.value=s),"items-per-page":u.value,"onUpdate:itemsPerPage":o[1]||(o[1]=s=>u.value=s),headers:T,"items-length":r.value,items:k.value,loading:g.value,"item-value":"name","onUpdate:options":U},{loading:e(()=>[l(" Loading locked license log... ")]),"item.success":e(({item:s})=>[s.success==!0?(_(),x(b,{key:0,label:"",color:"success"},{default:e(()=>[l(" Success ")]),_:1})):(_(),M("div",F,[t(b,{class:"me-2",label:"",color:"error"},{default:e(()=>[l(" Error ")]),_:1}),t(V,{icon:"",size:"small",variant:"text"},{default:e(()=>[t(N,null,{default:e(()=>[l(i(f(I)),1)]),_:1}),t(w,{title:"Error Message",message:s.errorMessage},null,8,["message"])]),_:2},1024)]))]),"item.createdAt":e(({item:s})=>[l(i(f(R)(s.createdAt,"DD MMM YYYY HH:mm")),1)]),_:2},1032,["page","items-per-page","items-length","items","loading"])]),_:1})]),_:1}))}}),O={class:"d-flex"},j={key:1},z=S({__name:"UsedLicenseTable",props:{getUsedLogs:{type:Function}},setup(d){const a=n(1),u=n(10),r=n(100),g=n(!0),T=[{title:"IDENTIFIER",key:"lockIdentifier"},{title:"STATUS",key:"success"},{title:"CREATED AT",key:"createdAt"},{title:"CARD NUMBER",key:"cardNumber"}],E=d,k=n([]);function U(){g.value=!0,E.getUsedLogs({limit:u.value,page:a.value}).then(h=>{const o=h.data.result;k.value=o.logs||[],r.value=o.recordsCount}).finally(()=>{setTimeout(()=>{g.value=!1},2e3)})}return(h,o)=>(_(),x(L,null,{default:e(()=>[t(v,null,{default:e(()=>[t(p,null,{default:e(()=>[l("Used License Log ")]),_:1})]),_:1}),t(c,{class:"mt-2"},{default:e(()=>[A("div",O,[t(V,{variant:"outlined","prepend-icon":f(D)},{default:e(()=>[l(" EXPORT ")]),_:1},8,["prepend-icon"])])]),_:1}),t(c,null,{default:e(()=>[t(Y,{"return-object":"",color:"secondary",page:a.value,"onUpdate:page":o[0]||(o[0]=s=>a.value=s),"items-per-page":u.value,"onUpdate:itemsPerPage":o[1]||(o[1]=s=>u.value=s),headers:T,"items-length":r.value,items:k.value,loading:g.value,"item-value":"name","onUpdate:options":U},{loading:e(()=>[l(" Loading used license log... ")]),"item.success":e(({item:s})=>[s.success==!0?(_(),x(b,{key:0,label:"",color:"success"},{default:e(()=>[l(" Success ")]),_:1})):(_(),M("div",j,[t(b,{class:"me-2",label:"",color:"error"},{default:e(()=>[l(" Error ")]),_:1}),t(V,{icon:"",size:"small",variant:"text"},{default:e(()=>[t(N,null,{default:e(()=>[l(i(f(I)),1)]),_:1}),t(w,{title:"Error Message",message:s.errorMessage},null,8,["message"])]),_:2},1024)]))]),"item.createdAt":e(({item:s})=>[l(i(f(R)(s.createdAt,"DD MMM YYYY HH:mm")),1)]),_:2},1032,["page","items-per-page","items-length","items","loading"])]),_:1})]),_:1}))}});async function X({limit:d=10,page:a=1}){return await P.get("/licenses/lock",{params:{limit:d,page:a}})}async function q({limit:d=10,page:a=1}){return await P.get("/licenses/consume",{params:{limit:d,page:a}})}async function G(){return{data:{result:{reserved:1e5,remaining:9800,locked:190,used:10},success:!0}}}const J=A("div",{class:"text-h5 font-weight-bold"},"Owned License",-1),de=S({__name:"OwnedLicense",setup(d){const a=n({reserved:0,remaining:0,locked:0,used:0});return G().then(u=>{const r=u.data.result;a.value=r}),(u,r)=>(_(),x(B,{fluid:""},{default:e(()=>[t(C,null,{default:e(()=>[t(m,null,{default:e(()=>[J]),_:1})]),_:1}),t(C,null,{default:e(()=>[t(m,null,{default:e(()=>[t(L,null,{default:e(()=>[t(v,null,{default:e(()=>[t(p,null,{default:e(()=>[l(" Reserved License ")]),_:1}),t(y,null,{default:e(()=>[l("description")]),_:1})]),_:1}),t(c,{class:"text-h4 font-weight-bold"},{default:e(()=>[l(i(a.value.reserved.toLocaleString("id")),1)]),_:1})]),_:1})]),_:1}),t(m,null,{default:e(()=>[t(L,null,{default:e(()=>[t(v,null,{default:e(()=>[t(p,null,{default:e(()=>[l(" Remaining License ")]),_:1}),t(y,null,{default:e(()=>[l("description")]),_:1})]),_:1}),t(c,{class:"text-h4 font-weight-bold"},{default:e(()=>[l(i(a.value.remaining.toLocaleString("id")),1)]),_:1})]),_:1})]),_:1}),t(m,null,{default:e(()=>[t(L,null,{default:e(()=>[t(v,null,{default:e(()=>[t(p,null,{default:e(()=>[l(" Locked License ")]),_:1}),t(y,null,{default:e(()=>[l("description")]),_:1})]),_:1}),t(c,{class:"text-h4 font-weight-bold"},{default:e(()=>[l(i(a.value.locked.toLocaleString("id")),1)]),_:1})]),_:1})]),_:1}),t(m,null,{default:e(()=>[t(L,null,{default:e(()=>[t(v,null,{default:e(()=>[t(p,null,{default:e(()=>[l(" Used License ")]),_:1}),t(y,null,{default:e(()=>[l("description")]),_:1})]),_:1}),t(c,{class:"text-h4 font-weight-bold"},{default:e(()=>[l(i(a.value.used.toLocaleString("id")),1)]),_:1})]),_:1})]),_:1})]),_:1}),t(C,null,{default:e(()=>[t(m,{cols:"12",xxl:"6"},{default:e(()=>[t(H,{"get-locked-logs":f(X)},null,8,["get-locked-logs"])]),_:1}),t(m,{cols:"12",xxl:"6"},{default:e(()=>[t(z,{"get-used-logs":f(q)},null,8,["get-used-logs"])]),_:1})]),_:1})]),_:1}))}});export{de as default};
