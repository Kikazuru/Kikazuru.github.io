import{d as B,u as q,c as z,l as M}from"./issuer-07d3c33d.js";import{u as N}from"./snackbar-867af268.js";import{v as O,q as X,t as G,s as H}from"./lazy-eda09f13.js";import{p as A,V as v}from"./VBtn-421a5577.js";import{a as S,b as D,d as x,j as F,V as U}from"./index-6405a72a.js";import{a as V,b as P,V as J}from"./VDataTableServer-921b4e3b.js";import{d as T,o as C,h,g as a,f as e,a as g,j as s,S as w,m as E,r as p,ae as j,w as K,i as Q}from"./index-69d1502a.js";import{b,a as k,V as W}from"./VRow-1f387fa0.js";import{V as R}from"./VForm-acfbacb3.js";import{V as I}from"./VTextField-f7af6f26.js";import{_ as Y}from"./FilterHeaderCheckbox.vue_vue_type_script_setup_true_lang-e8950ebf.js";import{V as L}from"./VChip-b541bb3f.js";import"./api-77cd4ed9.js";import"./tag-446592ee.js";import"./VList-0497e142.js";import"./filter-bfc06a5f.js";const Z={class:"d-flex justify-end mb-2"},ee=T({__name:"DeleteIssuer",props:{issuer:{}},emits:["update:show","deleted"],setup(y,{emit:m}){const d=y,o=m,u=N();function _(f){B(d.issuer.id).then(c=>{if(c.data.success)o("deleted"),f.value=!1,u.showSnackbar("User data has been deleted!","success");else throw Error}).catch(()=>{u.showSnackbar("Delete user failed!","error")})}return(f,c)=>(C(),h(P,{activator:"parent",width:"auto"},{default:a(({isActive:n})=>[e(U,{class:"text-center pa-4",rounded:"lg"},{default:a(()=>[g("div",Z,[e(A,{size:"small"},{default:a(()=>[s(w(E(O)),1)]),_:1})]),e(S,null,{default:a(()=>[e(D,null,{default:a(()=>[s(" Are you sure want to delete the issuer? ")]),_:1})]),_:1}),e(x,null,{default:a(()=>[s(" This action cannot be undo ")]),_:1}),e(F,null,{default:a(()=>[e(V),e(v,{onClick:l=>_(n),variant:"flat",color:"primary"},{default:a(()=>[s(" DELETE ")]),_:2},1032,["onClick"]),e(v,{onClick:l=>n.value=!1,color:"primary"},{default:a(()=>[s(" CANCEL ")]),_:2},1032,["onClick"]),e(V)]),_:2},1024)]),_:2},1024)]),_:1}))}}),ae=T({__name:"UpdateIssuer",props:{issuer:{}},emits:["update:show","updated"],setup(y,{emit:m}){const d=y,o=p(),u=p({identifier:d.issuer.identifier,name:d.issuer.name}),_=m,f=N();async function c(n){const{valid:l}=await o.value.validate();if(l){const r=j(u.value);q(d.issuer.id,r).then(t=>{if(t.data.success)_("updated"),f.showSnackbar("Issuer data has been updated!","success");else throw Error}).catch(()=>{f.showSnackbar("Update issuer failed!","error")}).finally(()=>{n.value=!1,o.value.reset()})}}return(n,l)=>(C(),h(P,{activator:"parent"},{default:a(({isActive:r})=>[e(k,null,{default:a(()=>[e(V),e(b,{cols:"12",xxl:"4",xl:"4",lg:"4",md:"4",sm:"7"},{default:a(()=>[e(R,{ref_key:"myForm",ref:o},{default:a(()=>[e(U,{"max-height":"90vh",class:"overflow-auto"},{default:a(()=>[e(S,null,{default:a(()=>[e(D,null,{default:a(()=>[s(" Add Issuer ")]),_:1})]),_:1}),e(x,null,{default:a(()=>[e(I,{modelValue:u.value.name,"onUpdate:modelValue":l[0]||(l[0]=t=>u.value.name=t),label:"Issuer Name"},null,8,["modelValue"]),e(I,{modelValue:u.value.identifier,"onUpdate:modelValue":l[1]||(l[1]=t=>u.value.identifier=t),label:"Identifier"},null,8,["modelValue"])]),_:1}),e(F,null,{default:a(()=>[e(V),e(v,{onClick:t=>c(r),class:"bg-primary"},{default:a(()=>[s("UPDATE")]),_:2},1032,["onClick"]),e(v,{onClick:t=>r.value=!1,variant:"text",color:"primary"},{default:a(()=>[s("CANCEL")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1536)]),_:2},1024),e(V)]),_:2},1024)]),_:1}))}}),te=T({__name:"AddIssuer",emits:["update:show","created"],setup(y,{emit:m}){const d=p(),o=p({identifier:"",name:""}),u=m,_=N();async function f(c){const{valid:n}=await d.value.validate();if(n){const l=j(o.value);z(l).then(r=>{if(r.data.success)u("created"),c.value=!1,d.value.reset(),_.showSnackbar("Issuer created","success");else throw Error}).catch(()=>{_.showSnackbar("Create issuer failed","error")})}}return(c,n)=>(C(),h(P,{activator:"parent"},{default:a(({isActive:l})=>[e(k,null,{default:a(()=>[e(V),e(b,{cols:"12",xxl:"4",xl:"4",lg:"4",md:"4",sm:"7"},{default:a(()=>[e(R,{ref_key:"myForm",ref:d},{default:a(()=>[e(U,{"max-height":"90vh",class:"overflow-auto"},{default:a(()=>[e(S,null,{default:a(()=>[e(D,null,{default:a(()=>[s(" Add Issuer ")]),_:1})]),_:1}),e(x,null,{default:a(()=>[e(I,{modelValue:o.value.name,"onUpdate:modelValue":n[0]||(n[0]=r=>o.value.name=r),label:"Issuer Name"},null,8,["modelValue"]),e(I,{modelValue:o.value.identifier,"onUpdate:modelValue":n[1]||(n[1]=r=>o.value.identifier=r),label:"Identifier"},null,8,["modelValue"])]),_:1}),e(F,null,{default:a(()=>[e(V),e(v,{onClick:r=>f(l),class:"bg-primary"},{default:a(()=>[s("ADD")]),_:2},1032,["onClick"]),e(v,{onClick:r=>l.value=!1,variant:"text",color:"primary"},{default:a(()=>[s("CANCEL")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1536)]),_:2},1024),e(V)]),_:2},1024)]),_:1}))}}),le=g("div",{class:"text-h5 font-weight-bold"},"Card Issuer",-1),se={class:"d-flex justify-center flex-wrap"},re={class:"d-flex justify-center align-center"},ge=T({__name:"MasterIssuer",setup(y){const m=p(1),d=p(10),o=p(100),u=p(!0),_=p([]),f=[{label:"Active",value:"active"},{label:"Deleted",value:"deleted"}],c=p(f.map(r=>r.value));K(c,()=>{l()});const n=[{title:"CARD ISSUER",key:"name"},{title:"IDENTIFIER",key:"identifier"},{title:"STATUS",key:"state",align:"center",sortable:!1},{title:"UPDATE",key:"update",sortable:!1,align:"center"},{title:"DELETE",key:"delete",sortable:!1,align:"center"}];function l(){u.value=!0,M({limit:d.value,page:m.value,states:c.value}).then(r=>{const t=r.data.result;_.value=t.issuers||[],o.value=t.recordsCount}).finally(()=>{setTimeout(()=>{u.value=!1},2e3)})}return(r,t)=>(C(),h(W,{fluid:""},{default:a(()=>[e(k,null,{default:a(()=>[e(b,null,{default:a(()=>[le]),_:1})]),_:1}),e(k,null,{default:a(()=>[e(b,null,{default:a(()=>[e(U,null,{default:a(()=>[e(S,null,{default:a(()=>[e(D,null,{default:a(()=>[s(" List Issuer ")]),_:1})]),_:1}),e(x,{class:"mt-2"},{default:a(()=>[e(k,null,{default:a(()=>[e(b,null,{default:a(()=>[e(v,{variant:"outlined","prepend-icon":E(X)},{default:a(()=>[s(" EXPORT ")]),_:1},8,["prepend-icon"])]),_:1}),e(V),e(b,{cols:"12",xxl:"4",xl:"4",lg:"4",md:"4"},{default:a(()=>[g("div",se,[e(I,{placeholder:"Search card issuer","hide-details":"",variant:"outlined",density:"compact"}),e(v,{variant:"tonal",class:"bg-primary ms-2"},{default:a(()=>[s(" ADD ISSUER "),e(te,{onCreated:l})]),_:1})])]),_:1})]),_:1})]),_:1}),e(x,null,{default:a(()=>[e(J,{"return-object":"","show-select":"",color:"secondary",page:m.value,"onUpdate:page":t[3]||(t[3]=i=>m.value=i),"items-per-page":d.value,"onUpdate:itemsPerPage":t[4]||(t[4]=i=>d.value=i),headers:n,"items-length":o.value,items:_.value,loading:u.value,"item-value":"name","onUpdate:options":l},{loading:a(()=>[s(" Loading issuers... ")]),"item.delete":a(({item:i})=>[e(v,{color:"secondary",variant:"text",icon:""},{default:a(()=>[e(A,null,{default:a(()=>[s(w(E(G)),1)]),_:1}),e(ee,{onDeleted:t[0]||(t[0]=$=>(m.value=1,l)),issuer:i},null,8,["issuer"])]),_:2},1024)]),"item.update":a(({item:i})=>[e(v,{color:"secondary",variant:"text",icon:""},{default:a(()=>[e(A,null,{default:a(()=>[s(w(E(H)),1)]),_:1}),e(ae,{onUpdated:t[1]||(t[1]=$=>(m.value=1,l)),issuer:i},null,8,["issuer"])]),_:2},1024)]),"item.state":a(({item:i})=>[i.state=="active"?(C(),h(L,{key:0,label:"",color:"success"},{default:a(()=>[s(" Active ")]),_:1})):i.state=="deleted"?(C(),h(L,{key:1,label:"",color:"error"},{default:a(()=>[s(" deleted ")]),_:1})):Q("",!0)]),"header.state":a(({column:i})=>[g("span",re,[g("div",null,w(i.title),1),e(Y,{disabled:u.value,items:f,modelValue:c.value,"onUpdate:modelValue":t[2]||(t[2]=$=>c.value=$)},null,8,["disabled","modelValue"])])]),_:2},1032,["page","items-per-page","items-length","items","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}});export{ge as default};
